<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- 域名表格行 -->
    <th:block th:fragment="domain-row">
        <tr th:id="${'domain-' + domain.id}">
            <th:block th:replace="~{:: domain-row-content(${domain})}"/>
        </tr>
    </th:block>

    <th:block th:fragment="domain-row-content(domain)">
        <td>
            <div class="domain-name">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="2" y1="12" x2="22" y2="12"/>
                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                </svg>
                <span th:text="${domain.domain}">example.com</span>
            </div>
        </td>
        <td>
            <span th:text="${domain.description}" th:if="${domain.description}">描述</span>
            <span th:unless="${domain.description}" class="text-muted">-</span>
        </td>
        <td>
            <span class="badge" th:classappend="${domain.isLocal} ? 'badge-info' : 'badge-secondary'">
                <th:block th:text="${domain.isLocal} ? '本地域名' : '外部域名'">本地</th:block>
            </span>
        </td>
        <td>
            <span class="status-dot" th:classappend="${domain.isEnabled} ? 'status-active' : 'status-inactive'"></span>
            <span th:text="${domain.isEnabled} ? '已启用' : '已禁用'">状态</span>
        </td>
        <td>
            <span th:text="${#temporals.format(domain.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-01</span>
        </td>
        <td>
            <div class="action-buttons">
                <button class="btn btn-icon btn-ghost" 
                        title="编辑"
                        th:hx-get="@{/domains/{id}/edit/modal(id=${domain.id})}"
                        hx-target="#modal-container"
                        hx-swap="innerHTML">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                </button>
                <button class="btn btn-icon btn-ghost"
                        th:title="${domain.isEnabled} ? '禁用' : '启用'"
                        th:hx-post="@{/domains/{id}/toggle(id=${domain.id})}"
                        th:hx-target="${'#domain-' + domain.id}"
                        hx-swap="outerHTML">
                    <svg th:if="${domain.isEnabled}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <svg th:unless="${domain.isEnabled}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 9.9-1"/>
                    </svg>
                </button>
                <button class="btn btn-icon btn-ghost btn-danger"
                        title="删除"
                        th:hx-delete="@{/domains/{id}(id=${domain.id})}"
                        th:hx-target="${'#domain-' + domain.id}"
                        hx-swap="outerHTML"
                        hx-confirm="确定要删除这个域名吗？">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                </button>
            </div>
        </td>
    </th:block>
</body>
</html>

